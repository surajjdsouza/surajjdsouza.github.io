<!DOCTYPE html>
<html>
<head>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>PATH Realtime</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <script
    type="text/javascript"
    src="/js/lib/dummy.js"
    
  ></script>

    <link rel="stylesheet" type="text/css" href="/DarkReader-surajjdsouza-github-io.css">


  <style id="compiled-css" type="text/css">
    .md-list.md-double-line {
  width: 520px;
  max-width: 100%;
  display: inline-block;
  vertical-align: top;
  border: 1px solid rgba(0, 0, 0, 0.12);
  margin: 2px;
}



    /* EOS */
  </style>

  <script id="insert"></script>

    <script src="/js/stringify.js?5e334e8f3e0220d567896ef271cc68937a903779" charset="utf-8"></script>
    <script>Vue.use(VueMaterial.default),new Vue({el:"#app",data:{timer:"",stations:{newark:{name:"Newark Penn",trains:[]},harrison:{name:"Harrison",trains:[]},journal_square:{name:"Journal Square",trains:[]},grove_street:{name:"Grove Street",trains:[]},exchange_place:{name:"Exchange Place",trains:[]},world_trade_center:{name:"World Trace Center",trains:[]},newport:{name:"Newport",trains:[]},hoboken:{name:"Hoboken",trains:[]},christopher_street:{name:"Christopher Street",trains:[]},ninth_street:{name:"9th Street",trains:[]},fourteenth_street:{name:"14th Street",trains:[]},twenty_third_street:{name:"23rd Street",trains:[]},thirty_third_street:{name:"33rd Street",trains:[]}}},created:function(){this.fetchStations(),this.timer=setInterval(this.fetchStations,5e3)},methods:{fetchStations:function(){for(var t in this.stations)this.$http.get("https://path.api.razza.dev/v1/stations/"+t+"/realtime").then(function(t){return function(e){this.stations[t].trains=e.body.upcomingTrains.sort((function(t,e){return Date.parse(t.projectedArrival)-Date.parse(e.projectedArrival)})).map((function(t){return{name:t.lineName,arrival_time:moment(Date.parse(t.projectedArrival)).fromNow()}}))}}(t))}},beforeDestroy(){clearInterval(this.timer)}});</script>
</head>
<body>
    <!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1,minimal-ui" name="viewport">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic|Material+Icons">
    <link rel="stylesheet" href="https://unpkg.com/vue-material@beta/dist/vue-material.min.css">
    <link rel="stylesheet" href="https://unpkg.com/vue-material@beta/dist/theme/default.css">
  </head>
  <body>
    <div id="app">
      <md-list class="md-double-line" v-for="station in stations">
        <md-subheader>{{ station.name }}</md-subheader>

        <md-divider></md-divider>

        <md-list-item v-for="train in station.trains">
          <md-icon class="md-primary">train</md-icon>

          <div class="md-list-item-text">
            <span>{{ train.name }}</span>
          </div>

          <div class="md-list-action">
            <span>{{ train.arrival_time }}</span>
          </div>
        </md-list-item>
      </md-list>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-resource@1.5.1"></script>
    <script src="https://unpkg.com/vue-material@beta"></script>
    <script src="https://momentjs.com/downloads/moment.min.js"></script>
  </body>
</html>

    <script type="text/javascript">//<![CDATA[
Vue.use(VueMaterial.default);

new Vue({
  el: '#app',
  data: {
    timer: '',
    stations: {
      "newark": {
        name: "Newark Penn",
        trains: []
      },
      "harrison": {
        name: "Harrison",
        trains: []
      },
      "journal_square": {
        name: "Journal Square",
        trains: []
      },
      "grove_street": {
        name: "Grove Street",
        trains: []
      },
      "exchange_place": {
        name: "Exchange Place",
        trains: []
      },
      "world_trade_center": {
        name: "World Trace Center",
        trains: []
      },
      "newport": {
        name: "Newport",
        trains: []
      },
      "hoboken": {
        name: "Hoboken",
        trains: []
      },
      "christopher_street": {
        name: "Christopher Street",
        trains: []
      },
      "ninth_street": {
        name: "9th Street",
        trains: []
      },
      "fourteenth_street": {
        name: "14th Street",
        trains: []
      },
      "twenty_third_street": {
        name: "23rd Street",
        trains: []
      },
      "thirty_third_street": {
        name: "33rd Street",
        trains: []
      }
    }
  },
  created: function() {
    this.fetchStations();
	this.loadCSS();
    this.timer = setInterval(this.fetchStations, 5000)
  },
  methods: {
    fetchStations: function() {
      for (var curr_station in this.stations) {
        this.$http.get("https://path.api.razza.dev/v1/stations/" + curr_station + "/realtime").then((function(station) {
          return function(result) {
            this.stations[station].trains = result.body.upcomingTrains.sort(function(a, b) {
              return Date.parse(a.projectedArrival) - Date.parse(b.projectedArrival);
            }).map(function(train) {
              return {
                name: train.lineName,
                arrival_time: moment(Date.parse(train.projectedArrival)).fromNow()
              };
            });
          }
        })(curr_station));
      }
    },
	loadCSS: function() {
      var file = document.createElement("link");
      file.setAttribute("rel", "stylesheet");
      file.setAttribute("type", "text/css");
      file.setAttribute("href", "/DarkReader-surajjdsouza-github-io.css");
      document.head.appendChild(file);
	}
  },
  beforeDestroy() {
    clearInterval(this.timer)
  }
});
  //]]></script>

  <script>
    // tell the embed parent frame the height of the content
    if (window.parent && window.parent.parent){
      window.parent.parent.postMessage(["resultsFrame", {
        height: document.body.getBoundingClientRect().height,
        slug: "c8pgra7m"
      }], "*")
    }

    // always overwrite window.name, in case users try to set it manually
    window.name = "result"
  </script>

    <script>
      let allLines = []

      window.addEventListener("message", (message) => {
        if (message.data.console){
          let insert = document.querySelector("#insert")
          allLines.push(message.data.console.payload)
          insert.innerHTML = allLines.join(";\r")

          let result = eval.call(null, message.data.console.payload)
          if (result !== undefined){
            console.log(result)
          }
        }
      })
    </script>

</body>
</html>
